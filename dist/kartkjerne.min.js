/*! bwmaplib 25-11-2014 16:31 */

var BW=this.BW||{};BW.MapCore=BW.MapCore||{},function(a){"use strict";function b(a){var b=a.opacity||1,c=a.visible;return _.isUndefined(c)&&(c=!0),{isBaseLayer:!1,transitionEffect:"resize",opacity:b,visibility:c}}function c(a){_.isUndefined(a.transparent)&&(a.transparent=!0);var c=!a.tiled,d=_.extend(b(a),{singleTile:c}),e=["maxResolution","minResolution"],f=_.reduce(e,function(b,c){return a[c]&&(b[c]=a[c]),b},{});return new OpenLayers.Layer.WMS(a.name,a.url,{layers:a.layerName,transparent:a.transparent},_.extend(d,f))}function d(a,c){return new OpenLayers.Layer.WMTS({name:a.name,url:a.url,layer:a.layerName,format:"image/png",style:"default",matrixSet:c.projection,matrixIds:_.map(_.range(c.numZoomLevels),function(a){return c.projection+":"+a})},b(a))}function e(a,b){if("WMTS"===a.protocol)return d(a,b);if("WMS"===a.protocol)return c(a);throw new Error('Unknown protrocol "'+a.protocol+'" for layer '+a.id)}function f(a,b){return _.find(a,function(a){return a.id===b})}function g(a,b,c){return new i(_.map(b,function(b){var d=f(a,b.id);return new h(_.extend(d,{layer:e(_.extend(d,b),c)}))}))}var h=Backbone.Model.extend({}),i=Backbone.Collection.extend({model:h,getLayers:function(){return this.map(function(a){return a.get("layer")})}}),j={bounds:[-25e5,35e5,3045984,9045984],srs:"EPSG:32633",maxResolution:21664,numZoomLevels:18,units:"m",initPos:{x:346108,y:7432016},initZoom:3,overlays:[],theme:OpenLayers._getScriptLocation()+"theme/default/style.css"};a.MapConfig=function(a,b){b=b||{},b=_.extend(j,b),b.baseLayerList&&(this.baseLayerList=b.baseLayerList),b.overlayList&&(this.overlayList=b.overlayList);var c=new OpenLayers.Bounds(b.bounds);this.map=new OpenLayers.Map(a,{maxExtent:c,maxResolution:b.maxResolution,numZoomLevels:b.numZoomLevels,units:b.units,projection:b.srs,allOverlays:!0,theme:b.theme});var d=new OpenLayers.Layer("",{isBaseLayer:!0});this.map.addLayer(d);var e=[];return this.baseLayers=g(this.baseLayerList,b.baseLayers,this.map),this.overlays=g(this.overlayList,b.overlays,this.map),e=e.concat(this.baseLayers.getLayers()),this.map.addLayers(e),b.overlays&&this.setOverlays(b.overlays),this.config=b,this.setInitialCenter(),this},a.MapConfig.prototype.setInitialCenter=function(){this.map.setCenter(new OpenLayers.LonLat(this.config.initPos.x,this.config.initPos.y),this.config.initZoom)},a.MapConfig.prototype.registerMapEvent=function(a,b,c){this.map.events.register(a,c,b)},a.MapConfig.prototype.setOverlayList=function(a){return this.overlayList=a,this},a.MapConfig.prototype.setOverlays=function(a){return this.overlays.each(function(a){a.get("layer").destroy()}),this.overlays=g(this.overlayList,a,this.map),this.map.addLayers(this.overlays.getLayers()),this}}(BW.MapCore);
//# sourceMappingURL=kartkjerne.min.map