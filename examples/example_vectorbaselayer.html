<!-- Example of basic initialization of a map with background and wms layer -->

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style type="text/css">
             html, body {
                 height:100%;
                 width:100%;
                 padding: 0;
                 margin: 0;
             }

             #map {
                 width:100%;
                 height:100%;
                 background-color: #AED1FF;
             }
         </style>
    </head>
<body>

<div id="map"></div>
<script type="text/javascript" src="../vendor/jquery/dist/jquery.min.js"></script>
<script type="text/javascript" src="../vendor/openlayers3/ol.js"></script>
<script type="text/javascript" src="../vendor/proj4/dist/proj4.js"></script>
<script type="text/javascript" src="../dist/bwmaplib.js"></script>

<script type="text/javascript">
/*global BW*/
(function () {
    'use strict';

    var config = {
        "numZoomLevels": 18,
        "newMaxRes":  20000,
        "center": [
            556597,
            9876845
        ],
        "zoom": 3,
        "layers": [
            {
                "id": "1992",
                "isBaseLayer": true,
                "subLayers": [
                    {
                        "source": "VECTOR",
                        "url": "verden4.json",
                        "name": "barentswatch_grunnkart",
                        "format": "topojson",
                        "coordinate_system": "EPSG:3857",
                        "extent": [ -20037508.34, -20037508.3455785, 20037508.3455785, 20037508.34],
                        "extentUnits": "m",
                        "id": "1992",
                        "tiled": false,
                        "numZoomLevels": 18
                    }
                ],
                "visibleOnLoad": true
            },
            {
                "id": "1994",
                "isBaseLayer": false,
                "subLayers": [
                    {
                        "source": "WMTS",
                        "url": "http://opencache.statkart.no/gatekeeper/gk/gk.open_wmts?",
                        "name": "barentswatch_stedsnavn",
                        "format": "image/png",
                        "coordinate_system": "EPSG:3575",
                        "extent": [ -20037508.34, -20037508.3455785, 20037508.3455785, 20037508.34],
                        "extentUnits": "m",
                        "id": "1994",
                        "tiled": true,
                        "matrixSet": 'EPSG:3857',
                        "numZoomLevels": 18
                    },
                ],
                "visibleOnLoad": true
            },
            {
                "id": "1996",
                "isBaseLayer": false,
                "subLayers": [
                    {
                        "source": "WMS",
                        "url": "http://bw.ecc.no:8080/geoserver/ows",
                        "name": "s57:s57",
                        "format": "image/png",
                        "coordinate_system": "EPSG:3575",
                        "extent": [ -20037508.34, -20037508.3455785, 20037508.3455785, 20037508.34],
                        "extentUnits": "m",
                        "id": "1996",
                        "tiled": true,
                        "crossOrigin": null
                    },
                ],
                "visibleOnLoad": true
            }
        ],
        "coordinate_system": "EPSG:3857",
        "extent": [ -20037508.34, -20037508.3455785, 20037508.3455785, 20037508.34],
        "extentUnits": "m"
    };

    var eventHandler = new BW.Events.EventHandler();
    var mapImplementation = new BW.MapImplementation.OL3.Map(
        null,
        eventHandler,
        null
    );
    var layerHandler = new BW.MapAPI.Layers(mapImplementation);
    var categoryHandler = new BW.MapAPI.Categories();

    var map = new BW.MapAPI.Map(
        mapImplementation,
        eventHandler,
        null,
        layerHandler,
        categoryHandler
    );

    map.Init('map', config);

}());
</script>

</body>
</html>
